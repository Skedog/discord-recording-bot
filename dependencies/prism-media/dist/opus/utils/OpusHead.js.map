{"version":3,"file":"OpusHead.js","sourceRoot":"","sources":["../../../src/opus/utils/OpusHead.ts"],"names":[],"mappings":";;;AASA,MAAM,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AAEzC,MAAa,QAAQ;IAMpB,YAAmB,IAAyB;;QAC3C,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;QACtC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QAClC,IAAI,CAAC,OAAO,GAAG,MAAA,IAAI,CAAC,OAAO,mCAAI,IAAI,CAAC,UAAU,GAAG,CAAC,EAAE,GAAG,IAAI,CAAC,CAAC,CAAC,oCAAoC;QAClG,IAAI,CAAC,UAAU,GAAG,MAAA,IAAI,CAAC,UAAU,mCAAI,CAAC,CAAC;IACxC,CAAC;IAEM,QAAQ;QACd,MAAM,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QAC9B,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC1B,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACZ,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC;QAC5B,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;QACrC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;QACxC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;QACxC,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;QACb,OAAO,IAAI,CAAC;IACb,CAAC;CACD;AAxBD,4BAwBC","sourcesContent":["export interface OpusHeadData {\n\tchannelCount: number;\n\tpreskip: number;\n\tsampleRate: number;\n\toutputGain: number;\n}\n\nexport type PartialOpusHeadData = Pick<OpusHeadData, 'channelCount' | 'sampleRate'> & Partial<OpusHeadData>;\n\nconst OPUSHEAD = Buffer.from('OpusHead');\n\nexport class OpusHead implements OpusHeadData {\n\tpublic readonly channelCount: number;\n\tpublic readonly preskip: number;\n\tpublic readonly sampleRate: number;\n\tpublic readonly outputGain: number;\n\n\tpublic constructor(data: PartialOpusHeadData) {\n\t\tthis.channelCount = data.channelCount;\n\t\tthis.sampleRate = data.sampleRate;\n\t\tthis.preskip = data.preskip ?? data.sampleRate * (80 / 1000); // 80ms of samples is a good default\n\t\tthis.outputGain = data.outputGain ?? 0;\n\t}\n\n\tpublic toBuffer(): Buffer {\n\t\tconst head = Buffer.alloc(19);\n\t\tOPUSHEAD.copy(head, 0, 0);\n\t\thead[8] = 1;\n\t\thead[9] = this.channelCount;\n\t\thead.writeUInt16LE(this.preskip, 10);\n\t\thead.writeUInt32LE(this.sampleRate, 12);\n\t\thead.writeUInt16LE(this.outputGain, 16);\n\t\thead[18] = 0;\n\t\treturn head;\n\t}\n}\n"]}